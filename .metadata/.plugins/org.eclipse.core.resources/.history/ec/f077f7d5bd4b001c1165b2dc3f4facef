/*
 * Parser.c
 *
 *  Created on: 20 nov. 2021
 *      Author: adrian
 */

#include <stdio.h>
#include <stdlib.h>
#include "Parser.h"

int parser_arcadeFromText(FILE* pFile,LinkedList* pArrayListArcade)
{
	int rtn =-1;
	Arcade* pArcade;
	char auxId[150];
	char auxNacionalidad[200];
	char auxTipoDeSonido[200];
	char auxCantidadJugadores[200];
	char auxCapacidadMaximaFichas[200];
	char auxNombreDeSalonAlQuePertenece[200];
	char auxNombreDelJuegoQueContiene[200];
	int banderaDelPrimero=1;
	int auxScanf;
	///
	char auxNacionalidad[63];
	int auxTipoDeSonido;
	int auxCantidadJugadores;
	int auxCapacidadMaximaFichas;
	char auxNombreDeSalonAlQuePertenece[63];
	char auxNombreDelJuegoQueContiene[63];
	int auxId;
	if(pFile!=NULL)
	{
		while(!feof(pFile))
		{
			if(banderaDelPrimero)
			{
				fscanf(pFile,"%[^,],%[^,],%[^,],%[^,],%[^,],%[^,],%[^\n]\n",auxId,auxNacionalidad,auxTipoDeSonido,auxCantidadJugadores,auxCapacidadMaximaFichas,auxNombreDeSalonAlQuePertenece,auxNombreDelJuegoQueContiene);
				banderaDelPrimero=0;
			}
			auxScanf=fscanf(pFile,"%[^,],%[^,],%[^,],%[^,],%[^,],%[^,],%[^\n]\n",auxId,auxNacionalidad,auxTipoDeSonido,auxCantidadJugadores,auxCapacidadMaximaFichas,auxNombreDeSalonAlQuePertenece,auxNombreDelJuegoQueContiene);
			if(auxScanf==7)
			{
				//printf("Lei: %s %s %s %s %s %s %s \n",auxId,auxNacionalidad,auxTipoDeSonido,auxCantidadJugadores,auxCapacidadMaximaFichas,auxNombreDeSalonAlQuePertenece,auxNombreDelJuegoQueContiene);
				pArcade=arcade_newParametros(auxId, auxNacionalidad, auxTipoDeSonido, auxCantidadJugadores, auxCapacidadMaximaFichas, auxNombreDeSalonAlQuePertenece, auxNombreDelJuegoQueContiene);
				//printf("id:%d\n",pArcade->id);
				if(pArcade!=NULL)
				{
				ll_add(pArrayListArcade, pArcade);
				for (int i = 0; i < ll_len(pArrayListArcade); i++)
				{
					pArcade= ll_get(pArrayListArcade, i);
					arcade_getNacionalidad(pArcade, auxNacionalidad);
					arcade_getTipoDeSonido(pArcade, &auxTipoDeSonido);
					arcade_getCantidadJugadores(pArcade, &auxCantidadJugadores);
					arcade_getCapacidadMaximaFichas(pArcade, &auxCapacidadMaximaFichas);
					arcade_getNombreDeSalonAlQuePertenece(pArcade, auxNombreDeSalonAlQuePertenece);
					arcade_getNombreDelJuegoQueContiene(pArcade, auxNombreDelJuegoQueContiene);
					arcade_getId(pArcade,&auxId);
					switch(auxTipoDeSonido)
					{
					case 1:
					printf("    [%4d] [%10s]             [STEREO]        [%10d]         [%10d]                [%10s]                      [%10s]\n",auxId,auxNacionalidad,auxCantidadJugadores,auxCapacidadMaximaFichas,auxNombreDeSalonAlQuePertenece,auxNombreDelJuegoQueContiene);
					break;
					case 2:
					printf("    [%4d] [%10s]             [MONO]        [%10d]         [%10d]                  [%10s]                        [%10s]\n",auxId,auxNacionalidad,auxCantidadJugadores,auxCapacidadMaximaFichas,auxNombreDeSalonAlQuePertenece,auxNombreDelJuegoQueContiene);
					break;
					}
				}
				rtn=0;
				}
			}
		}
	}
	return rtn;
}
