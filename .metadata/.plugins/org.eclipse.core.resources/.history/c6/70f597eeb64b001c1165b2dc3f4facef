/*
 * Parser.c
 *
 *  Created on: 20 nov. 2021
 *      Author: adrian
 */

#include <stdio.h>
#include <stdlib.h>
#include "Parser.h"

int parser_arcadeFromText(FILE* pFile,LinkedList* pArrayListArcade)
{
	int rtn =-1;
	Arcade* pArcade;
	char auxId[150];
	char auxNacionalidad[150];
	char auxTipoDeSonido[100];
	char auxCantidadJugadores[150];
	char auxCapacidadMaximaFichas[150];
	char auxNombreDeSalonAlQuePertenece[150];
	char auxNombreDelJuegoQueContiene[150];
	int banderaDelPrimero=1;
	int auxScanf;
	if(pFile!=NULL)
	{
		printf("entre1\n");
		while(!feof(pFile))
		{
			if(banderaDelPrimero)
			{
				printf("entre2\n");
				fscanf(pFile,"%[^,],%[^,],%[^,],%[^,],%[^,],%[^,],%[^\n]\n",auxId,auxNacionalidad,auxTipoDeSonido,auxCantidadJugadores,auxCapacidadMaximaFichas,auxNombreDeSalonAlQuePertenece,auxNombreDelJuegoQueContiene);
				banderaDelPrimero=0;
			}
			auxScanf=fscanf(pFile,"%[^,],%[^,],%[^,],%[^,],%[^,],%[^,],%[^\n]\n",auxId,auxNacionalidad,auxTipoDeSonido,auxCantidadJugadores,auxCapacidadMaximaFichas,auxNombreDeSalonAlQuePertenece,auxNombreDelJuegoQueContiene);
			if(auxScanf==7)
			{
				pArcade=arcade_newParametros(auxId, auxNacionalidad, auxTipoDeSonido, auxCantidadJugadores, auxCapacidadMaximaFichas, auxNombreDeSalonAlQuePertenece, auxNombreDelJuegoQueContiene);
				ll_add(pArrayListArcade, pArcade);
				rtn=0;
			}
		}
	}
	return rtn;
}
